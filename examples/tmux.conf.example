# Example tmux configuration with tmux-opencode-status

# ============================================================================
# Plugin Manager (TPM) Setup
# ============================================================================

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'IFAKA/tmux-opencode-status'

# ============================================================================
# tmux-opencode-status Configuration
# ============================================================================

# --- Basic Configuration ---
# Show count of OpenCode sessions
set -g @opencode_show_count "true"

# Prefix before session count
set -g @opencode_prefix "OC:"

# Separator between session indicators
set -g @opencode_separator " "

# Show abbreviated session names
set -g @opencode_show_session_name "false"

# Text to show when no sessions are running (empty = show nothing)
set -g @opencode_no_session_text ""

# --- Performance Options ---
# Enable intelligent caching (recommended for better performance)
set -g @opencode_enable_cache "true"

# Cache validity period in seconds (how long to trust cached state)
set -g @opencode_cache_ttl "5"

# --- Icon Configuration ---
# Default icons (Unicode circles)
set -g @opencode_icon_idle "‚óã"
set -g @opencode_icon_busy "‚óè"
set -g @opencode_icon_waiting "‚óâ"
set -g @opencode_icon_error "‚úó"

# Alternative: Emoji icons
# set -g @opencode_icon_idle "üí§"
# set -g @opencode_icon_busy "‚öôÔ∏è"
# set -g @opencode_icon_waiting "‚ùì"
# set -g @opencode_icon_error "‚ùå"

# Alternative: ASCII icons (for terminals without Unicode support)
# set -g @opencode_icon_idle "."
# set -g @opencode_icon_busy "*"
# set -g @opencode_icon_waiting "?"
# set -g @opencode_icon_error "X"

# Alternative: Box drawing characters
# set -g @opencode_icon_idle "‚ñ°"
# set -g @opencode_icon_busy "‚ñ†"
# set -g @opencode_icon_waiting "‚ñ£"
# set -g @opencode_icon_error "‚ñ®"

# --- Color Configuration ---
# Default colors
set -g @opencode_color_idle "green"
set -g @opencode_color_busy "yellow"
set -g @opencode_color_waiting "cyan"
set -g @opencode_color_error "red"

# Alternative: 256 color palette
# set -g @opencode_color_idle "colour2"
# set -g @opencode_color_busy "colour3"
# set -g @opencode_color_waiting "colour6"
# set -g @opencode_color_error "colour1"

# Alternative: Bright colors
# set -g @opencode_color_idle "brightgreen"
# set -g @opencode_color_busy "brightyellow"
# set -g @opencode_color_waiting "brightcyan"
# set -g @opencode_color_error "brightred"

# ============================================================================
# Status Bar Configuration
# ============================================================================

# Update status bar interval (with caching, 10s is a good balance)
# Faster = more responsive, Slower = less CPU
# Options: 5 (responsive), 10 (balanced), 15 (efficient)
set -g status-interval 10

# Status bar positioning
set -g status-position bottom
set -g status-justify left

# Status bar colors
set -g status-style 'bg=colour234 fg=colour137'

# Left side of status bar
set -g status-left ''

# Right side of status bar with OpenCode status
set -g status-right '#{opencode_status} #[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '

# Alternative: Status on left side
# set -g status-left '#{opencode_status} #[fg=colour233,bg=colour241,bold] [#S] '
# set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '

# Alternative: Detailed status with separators
# set -g status-right '#{opencode_status} | CPU: #{cpu_percentage} | %H:%M'

# Status bar window list
set -g status-left-length 20
set -g status-right-length 50

# Window status
setw -g window-status-current-style 'fg=colour1 bg=colour19 bold'
setw -g window-status-current-format ' #I#[fg=colour249]:#[fg=colour255]#W#[fg=colour249]#F '
setw -g window-status-style 'fg=colour9 bg=colour18'
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

# ============================================================================
# General tmux Configuration
# ============================================================================

# Enable mouse support
set -g mouse on

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer
set -g history-limit 10000

# Enable focus events
set -g focus-events on

# Enable 256 color support
set -g default-terminal "screen-256color"

# Reduce escape time
set -sg escape-time 0

# ============================================================================
# Key Bindings
# ============================================================================

# Reload configuration
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and -
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# Switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# ============================================================================
# Initialize TPM (keep this line at the very bottom of tmux.conf)
# ============================================================================
run '~/.tmux/plugins/tpm/tpm'
